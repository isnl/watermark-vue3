(function(t,e){typeof exports=="object"&&typeof module!="undefined"?e(exports,require("vue")):typeof define=="function"&&define.amd?define(["exports","vue"],e):(t=typeof globalThis!="undefined"?globalThis:t||self,e(t["watermark-vue3"]={},t.Vue))})(this,function(t,e){"use strict";const i=e.defineComponent({__name:"Watermark",props:{options:{},visible:{type:Boolean}},setup(a){const l=a,m={text:"\u6211\u662F\u6C34\u5370",fontSize:14,fontFamily:"Microsoft YaHei",color:"rgba(0, 0, 0, 0.3)",rotate:-30,opacity:.5,width:200,height:100},o=e.ref(null),y={position:"absolute",top:0,left:0,right:0,bottom:0,"pointer-events":"none"};return e.watch(()=>l.visible,r=>{o.value.style.display=r?"block":"none"}),e.onMounted(()=>{let r;r={...m,...l.options};const{text:s,fontSize:h,fontFamily:_,color:v,rotate:g,opacity:x,width:p,height:f}=r,c=document.createElement("canvas");c.width=p,c.height=f;const n=c.getContext("2d");n.font=`${h}px ${_}`,n.fillStyle=v,n.rotate(g*Math.PI/180),n.textAlign="center",Array.isArray(s)?s.forEach((b,k)=>{n.fillText(b,p/2,f+16*k)}):n.fillText(s,0,f),o.value.style.backgroundImage=`url(${c.toDataURL()})`,o.value.style.opacity=String(x)}),e.onBeforeUnmount(()=>{o.value&&o.value.remove()}),(r,s)=>(e.openBlock(),e.createElementBlock("div",{class:"watermark-container",style:y,ref_key:"wrapperRef",ref:o},null,512))}});i.install=a=>{a.component(i.__name,i)};const u=[i];var d={install:a=>{u.forEach(l=>{a.component(l.__name,l)})}};t.Watermark=i,t.default=d,Object.defineProperties(t,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})});
