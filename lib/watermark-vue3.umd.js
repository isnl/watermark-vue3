(function(t,e){typeof exports=="object"&&typeof module!="undefined"?e(exports,require("vue")):typeof define=="function"&&define.amd?define(["exports","vue"],e):(t=typeof globalThis!="undefined"?globalThis:t||self,e(t["watermark-vue3"]={},t.Vue))})(this,function(t,e){"use strict";var S="",d=(o,a)=>{const c=o.__vccOpts||o;for(const[n,r]of a)c[n]=r;return c};const _=e.defineComponent({__name:"Watermark",props:{options:{},visible:{type:Boolean}},setup(o){const a=o,c={text:"\u6211\u662F\u6C34\u5370",fontSize:14,fontFamily:"Microsoft YaHei",color:"rgba(0, 0, 0, 0.3)",rotate:-30,opacity:.5,width:200,height:100},n=e.ref(null);return e.watch(()=>a.visible,r=>{n.value.style.display=r?"block":"none"}),e.onMounted(()=>{let r;r={...c,...a.options};const{text:s,fontSize:v,fontFamily:h,color:x,rotate:g,opacity:k,width:p,height:u}=r,f=document.createElement("canvas");f.width=p,f.height=u;const i=f.getContext("2d");i.font=`${v}px ${h}`,i.fillStyle=x,i.rotate(g*Math.PI/180),i.textAlign="center",Array.isArray(s)?s.forEach((w,b)=>{i.fillText(w,p/2,u+16*b)}):i.fillText(s,0,u),n.value.style.backgroundImage=`url(${f.toDataURL()})`,n.value.style.opacity=String(k)}),e.onBeforeUnmount(()=>{n.value&&n.value.remove()}),(r,s)=>(e.openBlock(),e.createElementBlock("div",{class:"watermark-container",ref_key:"wrapperRef",ref:n},null,512))}});var l=d(_,[["__scopeId","data-v-c5416d50"]]);l.install=o=>{o.component(l.__name,l)};const m=[l];var y={install:o=>{m.forEach(a=>{o.component(a.__name,a)})}};t.Watermark=l,t.default=y,Object.defineProperties(t,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})});
